# Lab 3.2: Data Loading with useEffect

## Описание проекта

Этот проект реализует компонент для загрузки и отображения данных пользователя из API с использованием React хука `useEffect`. Демонстрирует правильную обработку состояний загрузки, ошибок и очистки ресурсов.

## Структура компонентов

### UserProfile
Основной компонент для отображения профиля пользователя:
- Использует `useEffect` для загрузки данных при монтировании и изменении `userId`
- Управляет состояниями: `user`, `loading`, `error`
- Реализует очистку с помощью `AbortController` для предотвращения утечек памяти
- Отображает состояние загрузки, ошибки или данные пользователя

### UserProfileApp
Родительский компонент:
- Управляет состоянием `userId` (начальное значение: 1)
- Рендерит `UserProfile` с пропсом `userId`
- Предоставляет кнопки для изменения `userId` (User 1, User 2, User 3, Random User)

## API

Используется публичный API: **JSONPlaceholder**
- Базовый URL: `https://jsonplaceholder.typicode.com`
- Endpoint для пользователей: `/users/{userId}`
- Поддерживает ID от 1 до 10

## Как запустить проект

1. Установите зависимости:
```bash
npm install
```

2. Запустите проект в режиме разработки:
```bash
npm start
```

3. Откройте [http://localhost:3000](http://localhost:3000) в браузере

## Объяснение useEffect

### Основное использование
`useEffect` используется для выполнения побочных эффектов (side effects), таких как загрузка данных из API. Он выполняется после рендеринга компонента.

### Массив зависимостей
```javascript
useEffect(() => {
  // код эффекта
}, [userId]); // массив зависимостей
```

**Почему `userId` включен в массив зависимостей:**
- Когда `userId` изменяется, необходимо загрузить новые данные пользователя
- Без `userId` в зависимостях эффект выполнится только один раз при монтировании
- Включение `userId` гарантирует, что эффект перезапустится при каждом изменении пропса
- Это необходимо для загрузки разных пользователей при обновлении `userId` родительским компонентом

### Функция очистки (Cleanup)
```javascript
return () => {
  abortController.abort();
};
```

**Зачем нужна очистка:**
- Предотвращает утечки памяти
- Отменяет запросы, если компонент размонтирован до завершения запроса
- Предотвращает обновление состояния на размонтированном компоненте
- Использует `AbortController` для отмены HTTP-запросов

### AbortController
`AbortController` позволяет отменить fetch-запрос:
- Создается перед запросом
- Передается в опции fetch через `signal`
- Вызывается в функции очистки при размонтировании или изменении зависимостей
- Предотвращает обновление состояния после отмены запроса

## Технические требования

- React 18+
- Функциональные компоненты и хуки
- Обработка всех состояний: loading, error, success
- Правильная очистка с использованием `AbortController`
- Корректные массивы зависимостей в `useEffect`
- Код должен работать без ошибок

## Особенности реализации

1. **Обработка состояний:**
   - Показ "Loading..." во время загрузки
   - Отображение сообщения об ошибке при неудаче
   - Отображение данных пользователя при успешной загрузке

2. **Очистка ресурсов:**
   - Использование `AbortController` для отмены запросов
   - Проверка `signal.aborted` перед обновлением состояния
   - Обработка `AbortError` без обновления состояния

3. **Обновление данных:**
   - Кнопки для выбора конкретного пользователя
   - Кнопка "Random User" для случайного пользователя
   - Автоматическая загрузка при изменении `userId`

